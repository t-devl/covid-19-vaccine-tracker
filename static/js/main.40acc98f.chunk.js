(this["webpackJsonpcovid-19-vaccine-tracker"]=this["webpackJsonpcovid-19-vaccine-tracker"]||[]).push([[0],{14:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),i=a(8),s=a.n(i),l=a(7),o=a(9),r=a(3),d=a(2),p=(a(14),a(0));function j(e){var t=e.regions,a=e.isRegionsActive;return Object(p.jsxs)("div",{className:"regions ".concat(a?"regions--active":""),children:[Object(p.jsx)("h2",{className:"regions__title",children:"Vaccines administered:"}),Object.keys(t).map((function(e){return Object(p.jsxs)("div",{className:"regions__region region",children:[Object(p.jsx)("h3",{className:"region__name",children:e}),Object(p.jsx)("p",{className:"region__vaccines-administered",children:t[e].administered.toLocaleString()})]},e)}))]})}function u(e){var t=e.data,a=e.active,n=Object(c.useState)(!1),i=Object(d.a)(n,2),s=i[0],l=i[1],o=Object(c.useState)(!1),r=Object(d.a)(o,2),u=r[0],b=r[1];Object(c.useEffect)((function(){l(a)}),[a]);return Object(p.jsx)("div",{className:"modal-container ".concat(s?"modal-container--active":""),children:Object(p.jsxs)("div",{className:"modal ".concat(u?"modal--regions-active":""),children:[Object(p.jsxs)("header",{className:"modal__header",children:[Object(p.jsxs)("div",{className:"modal__top-bar",children:[Object(p.jsx)("span",{className:"modal__continent",children:t.continent}),Object(p.jsx)("button",{className:"modal__close-btn",onClick:function(){l(!1)},children:Object(p.jsx)("i",{className:"fas fa-times modal__close-icon"})})]}),Object(p.jsx)("h2",{className:"modal__country",children:t.name}),Object(p.jsxs)("h3",{className:"modal__capital",children:["Capital: ",t.capital]}),Object(p.jsxs)("p",{className:"modal__population",children:["Population:"," ",t.population?t.population.toLocaleString():"N/A"]})]}),Object(p.jsxs)("ul",{className:"modal__list",children:[Object(p.jsxs)("li",{className:"modal__list-item",children:["Vaccines administered: ",t.vaccinesAdministered.toLocaleString()]}),Object(p.jsxs)("li",{className:"modal__list-item",children:["Partially vaccinated:"," ",t.peoplePartiallyVaccinated.toLocaleString()," ",t.population?"(".concat((t.peoplePartiallyVaccinated/t.population*100).toFixed(2),"%)"):""]}),Object(p.jsxs)("li",{className:"modal__list-item",children:["Fully vaccinated: ",t.peopleVaccinated.toLocaleString()," ",t.population?"(".concat((t.peopleVaccinated/t.population*100).toFixed(2),"%)"):""]})]}),Object(p.jsxs)("p",{className:"modal__last-updated",children:["Last updated: ",new Date(t.lastUpdated).toLocaleString()]}),Object.keys(t.regions).length>0?Object(p.jsxs)("div",{className:"regions-container",children:[Object(p.jsx)("button",{className:"view-regions-btn",onClick:function(){b(!u)},children:u?"Hide Regions":"Show Regions"}),Object(p.jsx)(j,{regions:t.regions,isRegionsActive:u})]}):""]})})}function b(e){var t=e.data,a=e.sortOption,c=e.rank,n=e.activateModal,i=e.cardClicked;return Object(p.jsxs)("div",{className:"card ".concat(t.population&&0!==t.peoplePartiallyVaccinated||"Highest percentage vaccinated"!==a?"":"card--grey"),onClick:function(){return n(t.name)},children:[Object(p.jsx)("div",{className:"card__index",children:c}),Object(p.jsx)("h2",{className:"card__name",children:t.name}),Object(p.jsxs)("p",{className:"card__vaccines-administered",children:[t.vaccinesAdministered.toLocaleString()," vaccines administered"]}),Object(p.jsxs)("p",{className:"card__partially-vaccinated",children:[t.peoplePartiallyVaccinated.toLocaleString()," partially vaccinated"," ",Object(p.jsx)("span",{className:"card__percentage",children:t.population?"(".concat((t.peoplePartiallyVaccinated/t.population*100).toFixed(2),"%)"):""})]}),Object(p.jsxs)("p",{className:"card__fully-vaccinated",children:[t.peopleVaccinated.toLocaleString()," fully vaccinated"," ",Object(p.jsx)("span",{className:"card__percentage",children:t.population?"(".concat((t.peopleVaccinated/t.population*100).toFixed(2),"%)"):""})]}),Object(p.jsx)(u,{data:t,rank:c,active:i===t.name})]})}function m(e){var t=e.displayedData,a=e.sortOption,n=Object(c.useState)(""),i=Object(d.a)(n,2),s=i[0],l=i[1],o=function(e){l(e)};return Object(p.jsx)("div",{className:"cards-container",children:t.map((function(e,t){return Object(p.jsx)(b,{data:e,sortOption:a,rank:t+1,activateModal:o,cardClicked:s},e.name)}))})}function O(e){var t=e.filterOption,a=e.setFilterOption;return Object(p.jsxs)("div",{className:"filter",children:[Object(p.jsx)("label",{className:"filter__label",children:"Vaccines administered by:"}),Object(p.jsx)("select",{className:"filter__select",value:t,onChange:function(e){return a(e.target.value)},children:Object(p.jsx)("option",{className:"filter__option",children:"Country"})})]})}function v(e){var t=e.sortOption,a=e.setSortOption,c=e.filterOption;return Object(p.jsxs)("div",{className:"sort",children:[Object(p.jsx)("label",{className:"sort__label",children:"Sort by:"}),Object(p.jsxs)("select",{className:"sort__select",value:t,onChange:function(e){return a(e.target.value)},children:[Object(p.jsx)("option",{className:"sort__option",children:"Alphabetical (A-Z)"}),Object(p.jsx)("option",{className:"sort__option",children:"Most vaccines administered"}),"Country"===c?Object(p.jsx)("option",{className:"sort__option",children:"Highest percentage vaccinated"}):""]})]})}var h=function(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),a=t[0],n=t[1],i=Object(c.useState)("Alphabetical (A-Z)"),s=Object(d.a)(i,2),j=s[0],u=s[1],b=Object(c.useState)([]),h=Object(d.a)(b,2),_=h[0],f=h[1],g=Object(c.useState)([]),x=Object(d.a)(g,2),N=(x[0],x[1]),y=Object(c.useState)([]),S=Object(d.a)(y,2),A=S[0],V=S[1];return Object(c.useEffect)((function(){if(JSON.parse(localStorage.getItem("covidVaccineData"))&&Date.now()-JSON.parse(localStorage.getItem("covidVaccineData")).timestamp<36e5){var e=JSON.parse(localStorage.getItem("covidVaccineData"));f(Object(r.a)(e.countries)),N(Object(r.a)(e.world)),n("Country")}else fetch("https://covid-api.mmediagroup.fr/v1/vaccines").then((function(e){return e.json()})).then((function(e){var t=[],a=[];return Object.keys(e).forEach((function(c){switch(c){case"World":a.push({name:c,vaccinesAdministered:e[c].All.administered,peopleVaccinated:e[c].All.people_vaccinated,peoplePartiallyVaccinated:e[c].All.people_partially_vaccinated,lastUpdated:e[c].All.updated,population:e.Global.All.population});break;case"Global":break;default:var n=e[c],i=n.All,s=Object(o.a)(n,["All"]);t.push({name:c,vaccinesAdministered:i.administered,peopleVaccinated:i.people_vaccinated,peoplePartiallyVaccinated:i.people_partially_vaccinated,population:i.population,continent:i.continent,location:i.location,capital:i.capital_city,lastUpdated:i.updated,regions:s})}})),{countries:t,world:a}})).then((function(e){f(Object(r.a)(e.countries)),N(Object(r.a)(e.world)),n("Country"),localStorage.setItem("covidVaccineData",JSON.stringify(Object(l.a)(Object(l.a)({},e),{},{timestamp:Date.now()})))}))}),[]),Object(c.useEffect)((function(){"Country"===a&&V(_),u("Alphabetical (A-Z)")}),[a]),Object(c.useEffect)((function(){if("Alphabetical (A-Z)"===j){var e=Object(r.a)(A).sort((function(e,t){return e.name>t.name?1:-1}));V(e)}else if("Most vaccines administered"===j){var t=Object(r.a)(A).sort((function(e,t){return e.vaccinesAdministered<t.vaccinesAdministered?1:-1}));V(t)}else if("Highest percentage vaccinated"===j){var a=Object(r.a)(A).sort((function(e,t){return(e.population?e.peoplePartiallyVaccinated/e.population:-1)<(t.population?t.peoplePartiallyVaccinated/t.population:-1)?1:-1}));V(a)}}),[j]),Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)("h1",{className:"title",children:"COVID-19 Vaccine Tracker"}),Object(p.jsx)(O,{filterOption:a,setFilterOption:n}),Object(p.jsx)(v,{sortOption:j,setSortOption:u,filterOption:a}),Object(p.jsx)(m,{displayedData:A,sortOption:j})]})},_=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,17)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,i=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),i(e),s(e)}))};s.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(h,{})}),document.getElementById("root")),_()}},[[16,1,2]]]);
//# sourceMappingURL=main.40acc98f.chunk.js.map