(this["webpackJsonpcovid-19-vaccine-tracker"]=this["webpackJsonpcovid-19-vaccine-tracker"]||[]).push([[0],{14:function(e,a,t){},16:function(e,a,t){"use strict";t.r(a);var c=t(1),n=t.n(c),i=t(8),s=t.n(i),l=t(7),o=t(9),r=t(3),d=t(2),p=(t(14),t(0));function j(e){var a=e.regions,t=e.isRegionsActive;return Object(p.jsxs)("div",{className:"regions ".concat(t?"regions--active":""),children:[Object(p.jsx)("h2",{className:"regions__title",children:"Vaccines administered:"}),Object.keys(a).map((function(e){return Object(p.jsxs)("div",{className:"regions__region region",children:[Object(p.jsx)("h3",{className:"region__name",children:e}),Object(p.jsx)("p",{className:"region__vaccines-administered",children:a[e].administered.toLocaleString()})]},e)}))]})}function u(e){var a=e.data,t=e.active,n=e.setCardClicked,i=e.rank,s=e.numberOfCards,l=Object(c.useState)(!1),o=Object(d.a)(l,2),r=o[0],u=o[1],m=Object(c.useState)(!1),b=Object(d.a)(m,2),O=b[0],h=b[1];Object(c.useEffect)((function(){u(t)}),[t]);return Object(p.jsx)("div",{className:"modal-container ".concat(r?"modal-container--active":""),children:Object(p.jsxs)("div",{className:"modal ".concat(O?"modal--regions-active":""),children:[Object(p.jsxs)("header",{className:"modal__header",children:[Object(p.jsxs)("div",{className:"modal__top-bar",children:[Object(p.jsx)("span",{className:"modal__continent",children:a.continent}),Object(p.jsx)("button",{className:"modal__close-btn",onClick:function(e){e.stopPropagation(),u(!1),n(null)},children:Object(p.jsx)("i",{className:"fas fa-times modal__close-icon"})})]}),Object(p.jsxs)("div",{className:"modal__header-main",children:[Object(p.jsx)("button",{className:"modal__arrow-btn",onClick:function(e){!function(e,a){e.stopPropagation(),a>1&&n(a-1)}(e,i)},children:Object(p.jsx)("i",{className:"fas fa-chevron-circle-left modal__arrow-icon"})}),Object(p.jsxs)("div",{className:"modal__header-details",children:[Object(p.jsx)("h2",{className:"modal__country",children:a.name}),Object(p.jsxs)("h3",{className:"modal__capital",children:["Capital: ",a.capital]}),Object(p.jsxs)("p",{className:"modal__population",children:["Population:"," ",a.population?a.population.toLocaleString():"N/A"]})]}),Object(p.jsx)("button",{className:"modal__arrow-btn",onClick:function(e){!function(e,a){e.stopPropagation(),a<s&&n(a+1)}(e,i)},children:Object(p.jsx)("i",{className:"fas fa-chevron-circle-right modal__arrow-icon"})})]})]}),Object(p.jsxs)("ul",{className:"modal__list",children:[Object(p.jsxs)("li",{className:"modal__list-item",children:["Vaccines administered: ",a.vaccinesAdministered.toLocaleString()]}),Object(p.jsxs)("li",{className:"modal__list-item",children:["Partially vaccinated:"," ",a.peoplePartiallyVaccinated.toLocaleString()," ",a.population?"(".concat((a.peoplePartiallyVaccinated/a.population*100).toFixed(2),"%)"):""]}),Object(p.jsxs)("li",{className:"modal__list-item",children:["Fully vaccinated: ",a.peopleVaccinated.toLocaleString()," ",a.population?"(".concat((a.peopleVaccinated/a.population*100).toFixed(2),"%)"):""]})]}),Object(p.jsxs)("p",{className:"modal__last-updated",children:["Last updated: ",new Date(a.lastUpdated).toLocaleString()]}),Object.keys(a.regions).length>0?Object(p.jsxs)("div",{className:"regions-container",children:[Object(p.jsx)("button",{className:"view-regions-btn",onClick:function(){h(!O)},children:O?"Hide Regions":"Show Regions"}),Object(p.jsx)(j,{regions:a.regions,isRegionsActive:O})]}):""]})})}function m(e){var a=e.data,t=e.sortOption,c=e.rank,n=e.setCardClicked,i=e.cardClicked,s=e.numberOfCards;return Object(p.jsxs)("div",{className:"card ".concat(a.population&&0!==a.peoplePartiallyVaccinated||"Highest percentage vaccinated"!==t?"":"card--grey"),onClick:function(){return n(c)},children:[Object(p.jsx)("div",{className:"card__index",children:c}),Object(p.jsx)("h2",{className:"card__name",children:a.name}),Object(p.jsxs)("p",{className:"card__vaccines-administered",children:[a.vaccinesAdministered.toLocaleString()," vaccines administered"]}),Object(p.jsxs)("p",{className:"card__partially-vaccinated",children:[a.peoplePartiallyVaccinated.toLocaleString()," partially vaccinated"," ",Object(p.jsx)("span",{className:"card__percentage",children:a.population?"(".concat((a.peoplePartiallyVaccinated/a.population*100).toFixed(2),"%)"):""})]}),Object(p.jsxs)("p",{className:"card__fully-vaccinated",children:[a.peopleVaccinated.toLocaleString()," fully vaccinated"," ",Object(p.jsx)("span",{className:"card__percentage",children:a.population?"(".concat((a.peopleVaccinated/a.population*100).toFixed(2),"%)"):""})]}),Object(p.jsx)(u,{data:a,rank:c,active:i===c,setCardClicked:n,numberOfCards:s})]})}function b(e){var a=e.displayedData,t=e.sortOption,n=Object(c.useState)(null),i=Object(d.a)(n,2),s=i[0],l=i[1];return Object(p.jsx)("div",{className:"cards-container",children:a.map((function(e,c){return Object(p.jsx)(m,{data:e,sortOption:t,rank:c+1,setCardClicked:l,cardClicked:s,numberOfCards:a.length},e.name)}))})}function O(e){var a=e.filterOption,t=e.setFilterOption;return Object(p.jsxs)("div",{className:"filter",children:[Object(p.jsx)("label",{className:"filter__label",children:"Vaccines administered by:"}),Object(p.jsx)("select",{className:"filter__select",value:a,onChange:function(e){return t(e.target.value)},children:Object(p.jsx)("option",{className:"filter__option",children:"Country"})})]})}function h(e){var a=e.sortOption,t=e.setSortOption,c=e.filterOption;return Object(p.jsxs)("div",{className:"sort",children:[Object(p.jsx)("label",{className:"sort__label",children:"Sort by:"}),Object(p.jsxs)("select",{className:"sort__select",value:a,onChange:function(e){return t(e.target.value)},children:[Object(p.jsx)("option",{className:"sort__option",children:"Alphabetical (A-Z)"}),Object(p.jsx)("option",{className:"sort__option",children:"Most vaccines administered"}),"Country"===c?Object(p.jsx)("option",{className:"sort__option",children:"Highest percentage vaccinated"}):""]})]})}var _=function(){var e=Object(c.useState)(""),a=Object(d.a)(e,2),t=a[0],n=a[1],i=Object(c.useState)("Alphabetical (A-Z)"),s=Object(d.a)(i,2),j=s[0],u=s[1],m=Object(c.useState)([]),_=Object(d.a)(m,2),v=_[0],f=_[1],g=Object(c.useState)([]),x=Object(d.a)(g,2),N=(x[0],x[1]),y=Object(c.useState)([]),C=Object(d.a)(y,2),S=C[0],k=C[1];return Object(c.useEffect)((function(){if(JSON.parse(localStorage.getItem("covidVaccineData"))&&Date.now()-JSON.parse(localStorage.getItem("covidVaccineData")).timestamp<36e5){var e=JSON.parse(localStorage.getItem("covidVaccineData"));f(Object(r.a)(e.countries)),N(Object(r.a)(e.world)),n("Country")}else fetch("https://covid-api.mmediagroup.fr/v1/vaccines").then((function(e){return e.json()})).then((function(e){var a=[],t=[];return Object.keys(e).forEach((function(c){switch(c){case"World":t.push({name:c,vaccinesAdministered:e[c].All.administered,peopleVaccinated:e[c].All.people_vaccinated,peoplePartiallyVaccinated:e[c].All.people_partially_vaccinated,lastUpdated:e[c].All.updated,population:e.Global.All.population});break;case"Global":break;default:var n=e[c],i=n.All,s=Object(o.a)(n,["All"]);a.push({name:c,vaccinesAdministered:i.administered,peopleVaccinated:i.people_vaccinated,peoplePartiallyVaccinated:i.people_partially_vaccinated,population:i.population,continent:i.continent,location:i.location,capital:i.capital_city,lastUpdated:i.updated,regions:s})}})),{countries:a,world:t}})).then((function(e){f(Object(r.a)(e.countries)),N(Object(r.a)(e.world)),n("Country"),localStorage.setItem("covidVaccineData",JSON.stringify(Object(l.a)(Object(l.a)({},e),{},{timestamp:Date.now()})))}))}),[]),Object(c.useEffect)((function(){"Country"===t&&k(v),u("Alphabetical (A-Z)")}),[t]),Object(c.useEffect)((function(){if("Alphabetical (A-Z)"===j){var e=Object(r.a)(S).sort((function(e,a){return e.name>a.name?1:-1}));k(e)}else if("Most vaccines administered"===j){var a=Object(r.a)(S).sort((function(e,a){return e.vaccinesAdministered<a.vaccinesAdministered?1:-1}));k(a)}else if("Highest percentage vaccinated"===j){var t=Object(r.a)(S).sort((function(e,a){return(e.population?e.peoplePartiallyVaccinated/e.population:-1)<(a.population?a.peoplePartiallyVaccinated/a.population:-1)?1:-1}));k(t)}}),[j]),Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)("h1",{className:"title",children:"COVID-19 Vaccine Tracker"}),Object(p.jsx)(O,{filterOption:t,setFilterOption:n}),Object(p.jsx)(h,{sortOption:j,setSortOption:u,filterOption:t}),Object(p.jsx)(b,{displayedData:S,sortOption:j})]})},v=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,17)).then((function(a){var t=a.getCLS,c=a.getFID,n=a.getFCP,i=a.getLCP,s=a.getTTFB;t(e),c(e),n(e),i(e),s(e)}))};s.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(_,{})}),document.getElementById("root")),v()}},[[16,1,2]]]);
//# sourceMappingURL=main.e190ae55.chunk.js.map